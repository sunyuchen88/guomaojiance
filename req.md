以下是国贸食品科学研究院检测系统的具体需求

说明：国贸食品科学研究院是检测机构，需要开发一个检测系统，对接用户系统，实现检测结果的自动上传。

1. 登录页面，支持账号  密码身份验证

2. 核心功能：
   
   2.1 列表页右上方，通过点击“获取数据”按钮可以从客户方接口获取数据，做到数据刷新和同步，在页面上呈现核心字段信息，点击”检测信息编辑“按钮支持用户编辑修改详细内容，详细内容请参考3.1部分
   
   2.2 列表页右上方，在“获取数据”按钮右边有“导出excel”按钮，点击该按钮后，支持多维度筛选下方列表页的检测项内容，筛选的功能参考2.3部分，基于选择的检测项目进行导出数据，导出的excel表格支持下图中的字段。
   
   ![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-23-09-38-902a49d6245bd3f771df63fcf48e07eb.png)
   
   2.3支持针对检测项的多维度查询，包含状态筛选，公司名称、检测编号、采样起始时间段和检测结果维度的查询和过滤功能。
   
   2.4. 在“导出excel”按钮右边有“报告下载”按钮，点击该按钮后，支持多维度筛选下方列表页的检测项内容，筛选的功能参考2.3部分，基于选择的检测项目进行导出关联的检测报告PDF，其中检测报告PDF文件是用户在部分上传的检测报告PDF文件。
   
   2.5 详情页
   
     2.5.1通过3.1部分接口获取到检测项列表，每条检测项右边有“编辑“”按钮，点击该按钮后，打开检测项目的详情页，通过客户接口获取到的每个字段都支持人工修改和编辑，详情页分2部分，上方是样品的基本信息。 字段包含：状态（待检测/已检测/已提交）、样品名称、样品编号、委托单位名称、委托单位地址、生产日期、样品数量、样品类别、样品状态、联系人、联系电话、收样日期、检测日期、车牌号、备注 。
   
   | 字段     | 对应的取值                                |
   | ------ | ------------------------------------ |
   | 状态     | 待检测/已检测/已提交，基于实际状态自动显示，不给人员编辑权限      |
   | 样品名称   | 3.1接口响应体的submission_goods_name       |
   | 样品编号   | 3.1接口响应体的check_object_union_num      |
   | 委托单位名称 | 3.1接口响应体的submission_person_company   |
   | 委托单位地址 | 留空，需人工填写                             |
   | 生产日期   | 默认为”/“                               |
   | 样品数量   | 需人工填写                                |
   | 样品类别   | 3.1接口响应体的check_type                  |
   | 样品状态   | 3.1接口响应体的status                      |
   | 联系人    | 3.1接口响应体的submission_person           |
   | 联系电话   | 3.1接口响应体的submission_person_mobile    |
   | 收样日期   | 3.1接口响应体的create_time                 |
   | 检测日期   | 报告提交当天的日期                            |
   | 车牌号    | 3.1接口响应体的submission_goods_car_number |
   | 备注     | 需人工填写                                |
   
     2.5.2详情页下方是检测项目的表单，数据从3.1接口部分获取到待检测数据，所有字段支持人工编辑，字段对应关系如下
   
   | 表头  | 序号                                                 | 检验项目                                            | 单位                                                          | 检测结果   | 检出限                                            | 检测方法                                                   |
   | --- | -------------------------------------------------- | ----------------------------------------------- | ----------------------------------------------------------- | ------ | ---------------------------------------------- | ------------------------------------------------------ |
   | 取值  | 3.1接口部分取值: data:list:objectItems:checkItem:item_id | 3.1接口部分取值: data:list:objectItems:checkItem:name | 3.1接口部分取值: data:list:objectItems:checkItem:reference_values | 取值默认为空 | 3.1接口部分取值: data:list:objectItems:checkItem:fee | 3.1接口部分取值: data:list:objectItems:checkItem:method_name |

     2.5.3 检测项目表单下方，有2项：1. “总体检测结果”， 是个选项，合格/不合格可供人工选择   2. 上传检测报告，支持上传pdf报告，上传之后后台自动生成报告的url，为调用3.2部分接口数据上传做准备
    
     2.5.4详情页右上方有“返回列表”和“保存修改”两个按钮，点击”返回列表“按钮之后返回列表页，点击“保存修改”后保存详情页的所有修改包括检测报告的上传。

   2.6 在列表页“编辑”按钮右边有“提交检测”按钮，点击“提交检测”按钮后，将调用客户方API接口上传数据，详细请参考3.2部分，3.2部分接口提交的数据，主要包含2.5.2部分的表单数据，以及2.5.3部分的总体检测结果和检测报告的url。

   3.核心业务逻辑如下

   3.1 从客户方接口获取数据，客户方接口信息如下, 我方发起请求把用户方数据拉过来，调用接口方式如下:

   ![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-15-49-image.png)

   ![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-16-25-image.png)

   ![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-16-54-image.png)

   3.2待人员提交了检测数据和上传测试报告之后，点击“提交检测结果”按钮后，将触发以下接口请求，将我方检测数据推送给用户方，对于用户方就是接受来自我方的检测数据。

# 检测结果接收

![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-19-30-image.png)

![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-20-00-image.png)

![](C:\Users\sunzhen\AppData\Roaming\marktext\images\2025-11-19-21-20-25-image.png)

## 
